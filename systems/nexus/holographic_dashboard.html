<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NEXUSä»ªè¡¨ç›˜ - ç¬¬ä¸€å—å…¨æ¯å±å¹•</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #000000 0%, #1a1a2e 50%, #16213e 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            color: white;
        }

        #container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        /* 3Dåœºæ™¯å®¹å™¨ */
        #scene-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        /* å…¨æ¯å±å¹•æ ·å¼ */
        .holographic-screen {
            width: 300px;
            height: 200px;
            background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(255, 0, 255, 0.1) 100%);
            border: 2px solid rgba(0, 255, 255, 0.5);
            border-radius: 10px;
            padding: 20px;
            box-shadow: 
                0 0 20px rgba(0, 255, 255, 0.3),
                inset 0 0 20px rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .holographic-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            animation: scan 3s infinite;
        }

        @keyframes scan {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .screen-title {
            font-size: 18px;
            font-weight: bold;
            color: #00FFFF;
            margin-bottom: 15px;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        .screen-content {
            font-size: 14px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.9);
        }

        .holographic-button {
            background: linear-gradient(45deg, rgba(0, 255, 255, 0.2), rgba(255, 0, 255, 0.2));
            border: 1px solid rgba(0, 255, 255, 0.5);
            color: #00FFFF;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
            margin-top: 15px;
            text-shadow: 0 0 5px rgba(0, 255, 255, 0.5);
        }

        .holographic-button:hover {
            background: linear-gradient(45deg, rgba(0, 255, 255, 0.4), rgba(255, 0, 255, 0.4));
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.5);
            transform: translateY(-2px);
        }

        /* æ§åˆ¶é¢æ¿ */
        #control-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            z-index: 100;
            max-width: 300px;
        }

        #control-panel h2 {
            margin: 0 0 15px 0;
            color: #00FFFF;
            font-size: 1.5em;
            text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
        }

        #control-panel p {
            margin: 5px 0;
            font-size: 14px;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.8);
        }

        .control-button {
            background: linear-gradient(45deg, #00FFFF, #0080FF);
            border: none;
            color: white;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s ease;
        }

        .control-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 255, 255, 0.3);
        }

        /* çŠ¶æ€ä¿¡æ¯ */
        #status-info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            z-index: 100;
            min-width: 200px;
        }

        .status-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            font-size: 12px;
        }

        .status-value {
            color: #00FFFF;
            font-weight: bold;
        }

        /* åŠ è½½åŠ¨ç”» */
        #loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            z-index: 200;
        }

        .holographic-spinner {
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #00FFFF;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* ç½‘æ ¼èƒŒæ™¯æ•ˆæœ */
        .grid-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(rgba(0, 255, 255, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 255, 255, 0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: grid-move 20s linear infinite;
            z-index: 0;
        }

        @keyframes grid-move {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }
    </style>
</head>
<body>
    <div id="container">
        <!-- ç½‘æ ¼èƒŒæ™¯ -->
        <div class="grid-background"></div>
        
        <!-- 3Dåœºæ™¯å®¹å™¨ -->
        <div id="scene-container"></div>
        
        <!-- åŠ è½½åŠ¨ç”» -->
        <div id="loading">
            <div class="holographic-spinner"></div>
            <p style="color: #00FFFF;">æ­£åœ¨åˆå§‹åŒ–å…¨æ¯ç³»ç»Ÿ...</p>
        </div>

        <!-- æ§åˆ¶é¢æ¿ -->
        <div id="control-panel">
            <h2>ğŸŒ NEXUSå…¨æ¯ä»ªè¡¨ç›˜</h2>
            <p><strong>ç›®æ ‡:</strong> ç¬¬ä¸€å—å…¨æ¯å±å¹•</p>
            <p><strong>æŠ€æœ¯:</strong> Three.js + CSS3DRenderer</p>
            <p><strong>åŠŸèƒ½:</strong> 3Dç©ºé—´ä¸­çš„HTMLå…ƒç´ </p>
            <p><strong>æ“ä½œ:</strong></p>
            <ul style="font-size: 12px; margin: 10px 0; padding-left: 20px;">
                <li>é¼ æ ‡æ‹–æ‹½: æ—‹è½¬è§†è§’</li>
                <li>æ»šè½®: ç¼©æ”¾</li>
                <li>å³é”®æ‹–æ‹½: å¹³ç§»</li>
                <li>ç‚¹å‡»å±å¹•: äº¤äº’æ“ä½œ</li>
            </ul>
            <div>
                <button class="control-button" onclick="resetCamera()">ğŸ¯ é‡ç½®è§†è§’</button>
                <button class="control-button" onclick="toggleAnimation()">ğŸŒŸ åŠ¨ç”»æ•ˆæœ</button>
                <button class="control-button" onclick="addNewScreen()">â• æ·»åŠ å±å¹•</button>
            </div>
        </div>

        <!-- çŠ¶æ€ä¿¡æ¯ */
        <div id="status-info">
            <h4 style="margin: 0 0 10px 0; color: #00FFFF;">ç³»ç»ŸçŠ¶æ€</h4>
            <div class="status-item">
                <span>å…¨æ¯å±å¹•:</span>
                <span class="status-value" id="screen-count">0</span>
            </div>
            <div class="status-item">
                <span>æ¸²æŸ“æ¨¡å¼:</span>
                <span class="status-value">CSS3D</span>
            </div>
            <div class="status-item">
                <span>äº¤äº’çŠ¶æ€:</span>
                <span class="status-value" id="interaction-status">å°±ç»ª</span>
            </div>
            <div class="status-item">
                <span>åŠ¨ç”»:</span>
                <span class="status-value" id="animation-status">å¼€å¯</span>
            </div>
        </div>
    </div>

    <!-- å…¨æ¯å±å¹•æ¨¡æ¿ (éšè—) -->
    <div id="screen-templates" style="display: none;">
        <!-- æ¬¢è¿å±å¹• -->
        <div id="welcome-screen" class="holographic-screen">
            <div class="screen-title">ğŸŒŸ æ¬¢è¿æ¥åˆ°NEXUS</div>
            <div class="screen-content">
                <p>è¿™æ˜¯ç¬¬ä¸€å—å…¨æ¯å±å¹•ï¼</p>
                <p>æ‚¨ç°åœ¨æ­£åœ¨ä½“éªŒ3Dç©ºé—´ä¸­çš„HTMLå…ƒç´ ã€‚</p>
                <p>è¿™é¡¹æŠ€æœ¯å°†å½»åº•æ”¹å˜ç”¨æˆ·ç•Œé¢çš„æœªæ¥ã€‚</p>
                <button class="holographic-button" onclick="showMessage('æ¬¢è¿å±å¹•è¢«ç‚¹å‡»äº†ï¼')">
                    ç‚¹å‡»æµ‹è¯•
                </button>
            </div>
        </div>

        <!-- æ§åˆ¶å±å¹• -->
        <div id="control-screen" class="holographic-screen">
            <div class="screen-title">âš™ï¸ ç³»ç»Ÿæ§åˆ¶</div>
            <div class="screen-content">
                <p>å…¨æ¯ç³»ç»Ÿè¿è¡Œæ­£å¸¸</p>
                <p>CPUä½¿ç”¨ç‡: <span style="color: #00FF00;">23%</span></p>
                <p>å†…å­˜ä½¿ç”¨: <span style="color: #FFFF00;">1.2GB</span></p>
                <p>ç½‘ç»œçŠ¶æ€: <span style="color: #00FF00;">åœ¨çº¿</span></p>
                <button class="holographic-button" onclick="runDiagnostic()">
                    è¿è¡Œè¯Šæ–­
                </button>
            </div>
        </div>

        <!-- æ•°æ®å±å¹• -->
        <div id="data-screen" class="holographic-screen">
            <div class="screen-title">ğŸ“Š æ•°æ®åˆ†æ</div>
            <div class="screen-content">
                <p>å®æ—¶æ•°æ®æµç›‘æ§</p>
                <div style="margin: 10px 0;">
                    <div style="background: rgba(0,255,0,0.2); height: 20px; width: 80%; border-radius: 10px; position: relative;">
                        <div style="background: #00FF00; height: 100%; width: 65%; border-radius: 10px;"></div>
                    </div>
                    <small>å¤„ç†è¿›åº¦: 65%</small>
                </div>
                <button class="holographic-button" onclick="refreshData()">
                    åˆ·æ–°æ•°æ®
                </button>
            </div>
        </div>
    </div>

    <!-- Three.js æ ¸å¿ƒåº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r158/three.min.js"></script>
    
    <!-- CSS3Dæ¸²æŸ“å™¨ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/renderers/CSS3DRenderer.js"></script>
    
    <!-- è½¨é“æ§åˆ¶å™¨ -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.158.0/examples/js/controls/OrbitControls.js"></script>

    <script>
        // å…¨å±€å˜é‡
        let scene, camera, renderer, controls;
        let holographicScreens = [];
        let animationEnabled = true;
        let screenCounter = 0;

        // å±å¹•é…ç½®
        const screenConfigs = [
            {
                id: 'welcome-screen',
                position: { x: 0, y: 0, z: 0 },
                rotation: { x: 0, y: 0, z: 0 }
            },
            {
                id: 'control-screen',
                position: { x: -400, y: 200, z: -200 },
                rotation: { x: 0, y: Math.PI / 4, z: 0 }
            },
            {
                id: 'data-screen',
                position: { x: 400, y: -100, z: 100 },
                rotation: { x: Math.PI / 8, y: -Math.PI / 3, z: 0 }
            }
        ];

        // åˆå§‹åŒ–åœºæ™¯
        function initScene() {
            console.log('ğŸš€ åˆå§‹åŒ–NEXUSå…¨æ¯ä»ªè¡¨ç›˜...');

            // åˆ›å»ºåœºæ™¯
            scene = new THREE.Scene();

            // åˆ›å»ºæ‘„åƒæœº
            camera = new THREE.PerspectiveCamera(
                75, 
                window.innerWidth / window.innerHeight, 
                1, 
                5000
            );
            camera.position.set(500, 300, 800);

            // åˆ›å»ºCSS3Dæ¸²æŸ“å™¨
            renderer = new THREE.CSS3DRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.domElement.style.position = 'absolute';
            renderer.domElement.style.top = '0';
            
            document.getElementById('scene-container').appendChild(renderer.domElement);

            // åˆ›å»ºè½¨é“æ§åˆ¶å™¨
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            controls.enableZoom = true;
            controls.enablePan = true;
            controls.minDistance = 200;
            controls.maxDistance = 2000;

            console.log('âœ… åœºæ™¯åˆå§‹åŒ–å®Œæˆ');
        }

        // åˆ›å»ºå…¨æ¯å±å¹•
        function createHolographicScreens() {
            console.log('ğŸŒ åˆ›å»ºå…¨æ¯å±å¹•...');

            screenConfigs.forEach((config, index) => {
                createSingleScreen(config, index);
            });

            updateScreenCount();
            console.log('âœ… å…¨æ¯å±å¹•åˆ›å»ºå®Œæˆ');
        }

        // åˆ›å»ºå•ä¸ªå±å¹•
        function createSingleScreen(config, index) {
            // è·å–å±å¹•æ¨¡æ¿
            const screenTemplate = document.getElementById(config.id);
            if (!screenTemplate) {
                console.error(`å±å¹•æ¨¡æ¿æœªæ‰¾åˆ°: ${config.id}`);
                return;
            }

            // å…‹éš†å±å¹•å…ƒç´ 
            const screenElement = screenTemplate.cloneNode(true);
            screenElement.id = `${config.id}-3d-${index}`;
            screenElement.style.display = 'block';

            // åˆ›å»ºCSS3Då¯¹è±¡
            const css3dObject = new THREE.CSS3DObject(screenElement);
            
            // è®¾ç½®ä½ç½®å’Œæ—‹è½¬
            css3dObject.position.set(config.position.x, config.position.y, config.position.z);
            css3dObject.rotation.set(config.rotation.x, config.rotation.y, config.rotation.z);

            // æ·»åŠ åˆ°åœºæ™¯
            scene.add(css3dObject);

            // ä¿å­˜å¼•ç”¨
            holographicScreens.push({
                object: css3dObject,
                element: screenElement,
                config: config,
                originalPosition: { ...config.position },
                originalRotation: { ...config.rotation }
            });

            console.log(`âœ… åˆ›å»ºå±å¹•: ${config.id}`);
        }

        // æ·»åŠ æ–°å±å¹•
        function addNewScreen() {
            screenCounter++;
            
            // åˆ›å»ºæ–°çš„å±å¹•å…ƒç´ 
            const newScreenElement = document.createElement('div');
            newScreenElement.className = 'holographic-screen';
            newScreenElement.innerHTML = `
                <div class="screen-title">ğŸ†• æ–°å±å¹• #${screenCounter}</div>
                <div class="screen-content">
                    <p>è¿™æ˜¯åŠ¨æ€åˆ›å»ºçš„å…¨æ¯å±å¹•</p>
                    <p>åˆ›å»ºæ—¶é—´: ${new Date().toLocaleTimeString()}</p>
                    <p>å±å¹•ç¼–å·: ${screenCounter}</p>
                    <button class="holographic-button" onclick="removeScreen(${holographicScreens.length})">
                        åˆ é™¤æ­¤å±å¹•
                    </button>
                </div>
            `;

            // éšæœºä½ç½®
            const position = {
                x: (Math.random() - 0.5) * 800,
                y: (Math.random() - 0.5) * 400,
                z: (Math.random() - 0.5) * 600
            };

            const rotation = {
                x: (Math.random() - 0.5) * Math.PI / 2,
                y: (Math.random() - 0.5) * Math.PI,
                z: (Math.random() - 0.5) * Math.PI / 4
            };

            // åˆ›å»ºCSS3Då¯¹è±¡
            const css3dObject = new THREE.CSS3DObject(newScreenElement);
            css3dObject.position.set(position.x, position.y, position.z);
            css3dObject.rotation.set(rotation.x, rotation.y, rotation.z);

            // æ·»åŠ åˆ°åœºæ™¯
            scene.add(css3dObject);

            // ä¿å­˜å¼•ç”¨
            holographicScreens.push({
                object: css3dObject,
                element: newScreenElement,
                config: { id: `dynamic-screen-${screenCounter}`, position, rotation },
                originalPosition: position,
                originalRotation: rotation
            });

            updateScreenCount();
            console.log(`âœ… æ·»åŠ æ–°å±å¹•: dynamic-screen-${screenCounter}`);
        }

        // åˆ é™¤å±å¹•
        function removeScreen(index) {
            if (index >= 0 && index < holographicScreens.length) {
                const screen = holographicScreens[index];
                scene.remove(screen.object);
                holographicScreens.splice(index, 1);
                updateScreenCount();
                console.log(`ğŸ—‘ï¸ åˆ é™¤å±å¹•: ${screen.config.id}`);
            }
        }

        // æ›´æ–°å±å¹•è®¡æ•°
        function updateScreenCount() {
            document.getElementById('screen-count').textContent = holographicScreens.length;
        }

        // é‡ç½®æ‘„åƒæœº
        function resetCamera() {
            camera.position.set(500, 300, 800);
            camera.lookAt(0, 0, 0);
            controls.target.set(0, 0, 0);
            controls.update();
            console.log('ğŸ¯ æ‘„åƒæœºå·²é‡ç½®');
        }

        // åˆ‡æ¢åŠ¨ç”»
        function toggleAnimation() {
            animationEnabled = !animationEnabled;
            document.getElementById('animation-status').textContent = animationEnabled ? 'å¼€å¯' : 'å…³é—­';
            console.log(`ğŸŒŸ åŠ¨ç”»æ•ˆæœ: ${animationEnabled ? 'å¼€å¯' : 'å…³é—­'}`);
        }

        // æ˜¾ç¤ºæ¶ˆæ¯
        function showMessage(message) {
            document.getElementById('interaction-status').textContent = 'äº¤äº’ä¸­';
            alert(message);
            setTimeout(() => {
                document.getElementById('interaction-status').textContent = 'å°±ç»ª';
            }, 1000);
        }

        // è¿è¡Œè¯Šæ–­
        function runDiagnostic() {
            document.getElementById('interaction-status').textContent = 'è¯Šæ–­ä¸­';
            console.log('ğŸ”§ è¿è¡Œç³»ç»Ÿè¯Šæ–­...');
            
            setTimeout(() => {
                alert('ç³»ç»Ÿè¯Šæ–­å®Œæˆï¼\n\nâœ… å…¨æ¯ç³»ç»Ÿ: æ­£å¸¸\nâœ… æ¸²æŸ“å¼•æ“: æ­£å¸¸\nâœ… äº¤äº’ç³»ç»Ÿ: æ­£å¸¸');
                document.getElementById('interaction-status').textContent = 'å°±ç»ª';
            }, 2000);
        }

        // åˆ·æ–°æ•°æ®
        function refreshData() {
            document.getElementById('interaction-status').textContent = 'åˆ·æ–°ä¸­';
            console.log('ğŸ“Š åˆ·æ–°æ•°æ®...');
            
            // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°
            const progressBar = document.querySelector('#data-screen-3d-2 .screen-content div div');
            if (progressBar) {
                const newWidth = Math.random() * 100;
                progressBar.style.width = newWidth + '%';
                progressBar.parentElement.nextElementSibling.textContent = `å¤„ç†è¿›åº¦: ${Math.round(newWidth)}%`;
            }
            
            setTimeout(() => {
                document.getElementById('interaction-status').textContent = 'å°±ç»ª';
            }, 1000);
        }

        // éšè—åŠ è½½ç•Œé¢
        function hideLoading() {
            const loading = document.getElementById('loading');
            loading.style.opacity = '0';
            setTimeout(() => {
                loading.style.display = 'none';
            }, 500);
        }

        // åŠ¨ç”»å¾ªç¯
        function animate() {
            requestAnimationFrame(animate);
            
            // æ›´æ–°æ§åˆ¶å™¨
            controls.update();

            // åŠ¨ç”»æ•ˆæœ
            if (animationEnabled) {
                const time = Date.now() * 0.001;
                
                holographicScreens.forEach((screen, index) => {
                    // è½»å¾®çš„æµ®åŠ¨æ•ˆæœ
                    const floatY = Math.sin(time + index) * 10;
                    screen.object.position.y = screen.originalPosition.y + floatY;
                    
                    // è½»å¾®çš„æ—‹è½¬æ•ˆæœ
                    const rotateY = Math.sin(time * 0.5 + index) * 0.1;
                    screen.object.rotation.y = screen.originalRotation.y + rotateY;
                });
            }
            
            // æ¸²æŸ“åœºæ™¯
            renderer.render(scene, camera);
        }

        // çª—å£å¤§å°è°ƒæ•´
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }

        // åˆå§‹åŒ–åº”ç”¨
        function init() {
            console.log('ğŸŒ NEXUSå…¨æ¯ä»ªè¡¨ç›˜ç³»ç»Ÿå¯åŠ¨...');
            
            initScene();
            
            // å»¶è¿Ÿåˆ›å»ºå±å¹•ä»¥æ¨¡æ‹ŸåŠ è½½è¿‡ç¨‹
            setTimeout(() => {
                createHolographicScreens();
                hideLoading();
            }, 1500);
            
            animate();
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            window.addEventListener('resize', onWindowResize, false);
            
            console.log('âœ… NEXUSå…¨æ¯ä»ªè¡¨ç›˜ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>