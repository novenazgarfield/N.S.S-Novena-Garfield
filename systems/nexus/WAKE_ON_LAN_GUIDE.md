# 🌅 NEXUS远程唤醒功能使用指南

## 📋 功能概述

NEXUS远程指挥中心现在支持**Wake-on-LAN (WOL)** 远程唤醒功能！您可以通过手机、平板或任何设备远程唤醒处于关机或睡眠状态的电脑。

## 🚀 快速开始

### 1. 启用目标电脑的WOL功能

#### Windows系统设置
1. **BIOS设置**
   - 重启电脑，进入BIOS设置
   - 找到 `Power Management` 或 `Advanced` 选项
   - 启用 `Wake on LAN` 或 `Wake on PCI-E`
   - 保存并退出

2. **网卡驱动设置**
   - 右键"此电脑" → 管理 → 设备管理器
   - 展开"网络适配器"
   - 右键网卡 → 属性 → 电源管理
   - ✅ 勾选"允许此设备唤醒计算机"
   - ✅ 勾选"只允许幻数据包唤醒计算机"

3. **网络设置**
   - 控制面板 → 网络和共享中心
   - 更改适配器设置 → 右键网卡 → 属性
   - 配置 → 高级 → Wake on Magic Packet → 启用

#### Linux系统设置
```bash
# 检查网卡是否支持WOL
sudo ethtool eth0

# 启用WOL
sudo ethtool -s eth0 wol g

# 永久启用（添加到启动脚本）
echo 'ethtool -s eth0 wol g' >> /etc/rc.local
```

#### macOS系统设置
1. 系统偏好设置 → 节能
2. ✅ 勾选"网络访问唤醒"
3. 高级 → ✅ 勾选"通过以太网络唤醒"

### 2. 获取目标电脑的MAC地址

#### Windows
```cmd
# 命令提示符
ipconfig /all

# PowerShell
Get-NetAdapter | Select Name, MacAddress
```

#### Linux/macOS
```bash
# 查看所有网卡
ifconfig

# 或使用ip命令
ip link show
```

#### 图形界面方法
- Windows: 网络设置 → 以太网 → 硬件属性
- macOS: 系统信息 → 网络 → 以太网
- Linux: 网络设置 → 有线连接 → 详细信息

### 3. 使用NEXUS远程唤醒

#### 方法1: 通过Web界面
1. 访问 NEXUS远程指挥中心
2. 点击绿色的 🌅 **远程唤醒电脑** 按钮
3. 输入目标电脑的MAC地址 (格式: `XX:XX:XX:XX:XX:XX`)
4. 输入广播IP地址 (通常是 `192.168.1.255`)
5. 点击"发送唤醒信号"

#### 方法2: 通过测试页面
1. 访问 `http://localhost:52333/test_remote_center.html`
2. 点击 🌅 **远程唤醒电脑** 按钮
3. 在弹出对话框中输入MAC地址和IP地址
4. 确认发送

## 🔧 配置详解

### MAC地址格式
支持以下格式：
- `XX:XX:XX:XX:XX:XX` (推荐)
- `XX-XX-XX-XX-XX-XX`

示例：
- `00:1B:21:3A:4C:5D`
- `AA-BB-CC-DD-EE-FF`

### IP地址配置
- **本地网络**: `192.168.1.255` (最常用)
- **其他网段**: `192.168.0.255`, `10.0.0.255`
- **特定IP**: 目标电脑的具体IP地址

### 网络要求
- 目标电脑和控制设备在同一网络
- 路由器支持广播包转发
- 防火墙允许UDP端口9的通信

## 🌐 远程网络唤醒

### 通过路由器设置
1. **端口转发**
   - 路由器管理界面 → 端口转发
   - 外部端口: 9 → 内部端口: 9
   - 协议: UDP
   - 目标IP: 广播地址

2. **DDNS设置**
   - 配置动态DNS服务
   - 获得固定域名访问

### 通过VPN
1. 建立VPN连接到目标网络
2. 使用内网IP进行唤醒
3. 更安全的远程访问方式

## 📱 移动端使用

### 手机/平板操作
1. 打开浏览器访问NEXUS系统
2. 界面自动适配移动设备
3. 点击远程唤醒按钮
4. 输入预设的MAC地址
5. 一键唤醒目标电脑

### PWA安装
1. 浏览器菜单 → "添加到主屏幕"
2. 创建桌面快捷方式
3. 像原生应用一样使用

## 🔍 故障排除

### 常见问题

#### 1. 唤醒失败
**可能原因：**
- BIOS中WOL功能未启用
- 网卡驱动WOL设置未开启
- MAC地址输入错误
- 网络连接问题

**解决方案：**
```bash
# 测试网络连通性
ping 192.168.1.1

# 检查MAC地址格式
# 正确: 00:1B:21:3A:4C:5D
# 错误: 00:1b:21:3a:4c:5d (小写)
```

#### 2. 部分唤醒成功
**可能原因：**
- 电源管理设置不当
- 快速启动功能干扰
- 网卡省电模式

**解决方案：**
- Windows: 禁用"快速启动"
- 网卡属性: 禁用"允许计算机关闭此设备"

#### 3. 跨网段唤醒失败
**可能原因：**
- 路由器不转发广播包
- 防火墙阻止UDP端口9

**解决方案：**
- 使用定向IP而非广播地址
- 配置路由器WOL转发
- 检查防火墙设置

### 调试工具

#### 网络抓包
```bash
# Linux下监听WOL包
sudo tcpdump -i eth0 port 9

# 查看是否收到魔术包
sudo tcpdump -i eth0 -X port 9
```

#### 测试命令
```bash
# Linux下手动发送WOL包
wakeonlan 00:1B:21:3A:4C:5D

# Windows下使用PowerShell
Send-WOL -MacAddress "00:1B:21:3A:4C:5D"
```

## 📊 支持的设备类型

### 台式机
- ✅ 大部分现代主板支持
- ✅ 有线网卡连接
- ⚠️ 需要保持电源连接

### 笔记本电脑
- ✅ 商务笔记本通常支持
- ⚠️ 游戏本支持度较低
- ⚠️ 需要连接电源适配器

### 服务器
- ✅ 企业级服务器完全支持
- ✅ 支持远程管理功能
- ✅ 24/7待机唤醒

### 不支持的设备
- ❌ 大部分无线网卡
- ❌ USB网卡
- ❌ 虚拟机
- ❌ 移动设备

## 🔒 安全考虑

### 安全特性
- WOL只能开机，无法执行其他操作
- 需要知道确切的MAC地址
- 局域网内相对安全

### 安全建议
1. **限制访问**
   - 仅在可信网络使用
   - 配置防火墙规则
   - 使用VPN访问

2. **监控日志**
   - 记录唤醒操作
   - 监控异常访问
   - 定期检查日志

3. **网络隔离**
   - 重要设备独立网段
   - 限制广播域范围
   - 使用VLAN隔离

## 🎯 使用场景

### 1. 远程办公
```
场景: 在家需要访问公司电脑
操作: 手机唤醒 → VPN连接 → 远程桌面
```

### 2. 实验室管理
```
场景: 下班后启动长时间计算任务
操作: 远程唤醒 → SSH连接 → 提交任务
```

### 3. 节能管理
```
场景: 自动化电源管理
操作: 定时关机 → 需要时唤醒 → 节省电费
```

### 4. 紧急访问
```
场景: 紧急需要访问关机的服务器
操作: 手机唤醒 → 立即恢复服务 → 解决问题
```

## 📈 高级功能

### 批量唤醒
```javascript
// 同时唤醒多台电脑
const computers = [
    { name: '工作站1', mac: '00:1B:21:3A:4C:5D' },
    { name: '服务器1', mac: 'AA:BB:CC:DD:EE:FF' }
];

computers.forEach(computer => {
    executeCommand('wake_computer', {
        mac_address: computer.mac,
        ip_address: '192.168.1.255'
    });
});
```

### 定时唤醒
```bash
# 使用cron定时唤醒
# 每天早上8点唤醒工作站
0 8 * * * wakeonlan 00:1B:21:3A:4C:5D
```

### 条件唤醒
```python
# Python脚本：根据条件自动唤醒
import requests
import subprocess

def wake_if_needed():
    # 检查服务器状态
    try:
        response = requests.get('http://192.168.1.100', timeout=5)
    except:
        # 服务器无响应，执行唤醒
        subprocess.run(['wakeonlan', '00:1B:21:3A:4C:5D'])
```

## 🎉 总结

NEXUS远程唤醒功能让您能够：

- 🌍 **随时随地**唤醒目标电脑
- 📱 **多设备支持**：手机、平板、电脑
- 🔒 **安全可靠**：局域网内安全操作
- ⚡ **快速响应**：5-30秒内完成唤醒
- 💡 **节能环保**：按需开机，节省电力

现在您可以真正实现**远程指挥与控制**，让NEXUS系统成为您的得力助手！

---

*需要帮助？请查看项目文档或联系技术支持。*